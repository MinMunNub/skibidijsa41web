<!-- index.html -->
<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SkibidiPC — Components & Shipping</title>
    <link rel="stylesheet" href="css/products.css" />
    <link rel="stylesheet" href="nav.css">
</head>

<body>
    <div id="site-header"></div>

    <section class="container controls">
        <div class="controls-left">
            <input id="searchInput" type="search" placeholder="Search components..." />
            <button id="searchBtn" class="btn">Search</button>
            <select id="categoryFilter" class="select">
                <option value="all">All Categories</option>
                <option value="CPU">CPU</option>
                <option value="GPU">GPU</option>
                <option value="Motherboard">Motherboard</option>
                <option value="RAM">RAM</option>
                <option value="Storage">Storage</option>
                <option value="PSU">PSU</option>
                <option value="Case">Case</option>
                <option value="Cooler">Cooler</option>
                <option value="Monitor">Monitor</option>
            </select>
        </div>
        <div class="controls-right">
            <button id="sellerToggle" class="btn ghost">Seller Mode</button>
            <button id="addProductBtn" class="btn primary seller-only" hidden>Add New Product</button>
        </div>
    </section>

    <main class="container layout">
        <aside class="sidebar">
            <div class="side-card">
                <h3>Brand</h3>
                <div id="brandList" class="brand-list"></div>
            </div>

            <div class="side-card">
                <h3>Price</h3>
                <div class="range-row">
                    <div>
                        <label>Min</label>
                        <input id="priceMin" type="range" min="0" max="5000" step="1">
                        <div class="range-val"><span id="priceMinVal">$0</span></div>
                    </div>
                    <div>
                        <label>Max</label>
                        <input id="priceMax" type="range" min="0" max="5000" step="1">
                        <div class="range-val"><span id="priceMaxVal">$0</span></div>
                    </div>
                </div>
                <label class="brand-item" style="margin-top:8px">
                    <input id="saleOnly" type="checkbox"> <span>On sale only</span>
                </label>
            </div>

            <div class="side-card">
                <h3>Rating</h3>
                <div class="brand-list">
                    <label class="brand-item"><input type="radio" name="star" value="4.5"> <span>★ 4.5 &
                            up</span></label>
                    <label class="brand-item"><input type="radio" name="star" value="4"> <span>★ 4.0 & up</span></label>
                    <label class="brand-item"><input type="radio" name="star" value="3.5"> <span>★ 3.5 &
                            up</span></label>
                    <label class="brand-item"><input type="radio" name="star" value="0" checked>
                        <span>Any</span></label>
                </div>
            </div>

            <div class="side-card">
                <h3>Sort</h3>
                <select id="sideSortKey" class="select full">
                    <option value="relevance">Relevance</option>
                    <option value="priceAsc">Price ↑</option>
                    <option value="priceDesc">Price ↓</option>
                    <option value="nameAsc">Name A→Z</option>
                    <option value="nameDesc">Name Z→A</option>
                    <option value="ratingDesc">Rating ↓</option>
                    <option value="discountDesc">Discount ↓</option>
                </select>
                <button id="applyFilters" class="btn full">Apply</button>
            </div>
        </aside>

        <section class="content">
            <div id="productsWrap"></div>
        </section>
    </main>

    <button id="cartFab" class="cart-fab">
        <span>Cart</span>
        <b id="cartCount">0</b>
    </button>

    <dialog id="cartModal" class="modal">
        <form method="dialog" class="modal-card">
            <header class="modal-head">
                <h3>Your Cart</h3>
                <button class="icon-btn" value="close" aria-label="Close">✕</button>
            </header>
            <div id="cartList" class="cart-list"></div>
            <footer class="modal-foot">
                <button id="buySelectedBtn" type="button" class="btn primary">Buy Selected</button>
                <button value="close" class="btn ghost">Close</button>
            </footer>
        </form>
    </dialog>

    <dialog id="shipModal" class="modal">
        <form method="dialog" class="modal-card">
            <header class="modal-head">
                <h3>Order Progress</h3>
                <button class="icon-btn" value="close" aria-label="Close">✕</button>
            </header>
            <div class="ship-wrap">
                <div id="shipInfo" class="ship-info"></div>
                <div class="progress">
                    <div id="progressBar" class="progress-bar" style="width:0%"></div>
                </div>
                <p id="progressLabel" class="muted">Preparing… 0%</p>
            </div>
            <footer class="modal-foot">
                <button id="cancelShipBtn" type="button" class="btn">Cancel Order</button>
                <button value="close" class="btn ghost">Close</button>
            </footer>
        </form>
    </dialog>

    <dialog id="editModal" class="modal">
        <form method="dialog" class="modal-card" id="editForm">
            <header class="modal-head">
                <h3 id="editTitle">Add Product</h3>
                <button class="icon-btn" value="close" aria-label="Close">✕</button>
            </header>

            <div class="grid2">
                <label> Name
                    <input name="name" required />
                </label>
                <label> Category
                    <select name="category" required class="select">
                        <option>CPU</option>
                        <option>GPU</option>
                        <option>Motherboard</option>
                        <option>RAM</option>
                        <option>Storage</option>
                        <option>PSU</option>
                        <option>Case</option>
                        <option>Cooler</option>
                        <option>Monitor</option>
                    </select>
                </label>
                <label> Price (USD)
                    <input name="price" type="number" min="0" step="1" required />
                </label>
                <label> Brand
                    <input name="brand" required />
                </label>
                <label> Image
                    <input name="image" type="file" accept="image/*" />
                </label>
                <label> Specs
                    <input name="specs" placeholder="e.g. 8C/16T, 5.1GHz; 12GB GDDR6" />
                </label>
            </div>

            <footer class="modal-foot">
                <button id="saveProductBtn" type="submit" class="btn primary">Save</button>
                <button value="close" class="btn ghost">Cancel</button>
            </footer>
        </form>
    </dialog>

    <script src="nav.js"></script>
    <script>buildHeader({ brandLink: "index.html" });</script>
    <script type="module" src="js/products.js"></script>
</body>

</html>